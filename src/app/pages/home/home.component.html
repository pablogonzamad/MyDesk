<div class="container text-light text-center pt-5 pb-5">
    <div class="row">

        <div class="col-2">
            <div>
                <h4>Perfil</h4>
                <div>
                    <img src="/assets/perfil.png" alt="" width="150px" height="150px">
                </div>
            </div>

            <div class="pt-4">
                <p>
                    Jacinto Jiménez
                </p>
                <p class="bg-info bg-opacity-50 border border-info rounded">Gerente de Medicina</p>

            </div>

            <div class="btn-group-vertical d-inline rounded" role="group">
                <button type="button" class="btn prim-btn text-white" routerLink="/perfil">Mi Perfil</button>
                <button type="button" class="btn prim-btn text-white" routerLink="/ajustes">Ajustes</button>
            </div>
            <div class="btn-group-vertical d-inline rounded" role="group">
                <button type="button" class="btn btn-danger text-white my-3" (click)="logOut()">Cerrar Sesión</button>
            </div>
        </div>

        <div class="container col-7">

            <div class="card main-card">
                <h4 class="text-white m-3">Escribir Nueva Nota</h4>
                <div class="card m-3">
                    <form [formGroup]="noteForm" (submit)="sumbit($event)">

                        <input type="text" class="form-control" placeholder="Titulo de la Nota" formControlName="title">

                        <textarea rows="5" class="form-control" placeholder="Descripción de la Nota"
                            formControlName="descrip"></textarea>
                        @if (creating) {
                        <button class="btn btn-success m-2" type="submit">Crear Nota</button>
                        }@else if(!creating) {
                        <button class="btn btn-warning m-2" type="submit">Editar Nota</button>
                        <button class="btn btn-danger m-2" (click)="cancelEditBtn()">Cancelar Edición</button>
                        }

                    </form>

                </div>
                <hr>
                <h3 class="text-white">Mis Notas</h3>
                <div class="card m-3 p-3" id="vistaNotas">

                    @if (!loadingNotes) {
                    @for (note of notesList; track $index) {
                    <div class="card border-3 shadow m-2 p-3">
                        <h4>{{note.titulo}}</h4>
                        <p>{{note.descripcion}}</p>
                        <p></p>
                        <div>
                            <button class="btn btn-warning m-1" (click)="editNoteBtn(note.id)">Editar</button>
                            <button class="btn btn-danger m-1" (click)="deleteNote(note.id)">Borrar</button>
                        </div>
                    </div>
                    }
                    }@else if (loadingNotes) {
                    <div class="card border-3 shadow m-2 p-3">
                        <div class="m-5">
                            <img src="/assets/loading.gif" alt="" width="200px" height="200px">
                            <H4>Cargando...</H4>
                        </div>
                    </div>
                    }



                </div>

            </div>
        </div>

        @if (configReloj || configClima) {
        <div class="container col-3">
            <h4>Mis Widgets</h4>

            @if (configReloj) {
            <div class="card main-card m-3 pt-3 pb-4 align-items-center text-white">

                <h5>Reloj</h5>

                <div class="clock text-dark">

                    <label style="--i:1"><span>1</span></label>
                    <label style="--i:2"><span>2</span></label>
                    <label style="--i:3"><span>3</span></label>
                    <label style="--i:4"><span>4</span></label>
                    <label style="--i:5"><span>5</span></label>
                    <label style="--i:6"><span>6</span></label>
                    <label style="--i:7"><span>7</span></label>
                    <label style="--i:8"><span>8</span></label>
                    <label style="--i:9"><span>9</span></label>
                    <label style="--i:10"><span>10</span></label>
                    <label style="--i:11"><span>11</span></label>
                    <label style="--i:12"><span>12</span></label>

                    <div class="indicator">
                        <span class="hand hour" #hrHand></span>
                        <span class="hand minute" #minHand></span>
                        <span class="hand second" #secHand></span>
                    </div>

                </div>

            </div>
            }

            @if (configClima){
            <div class="card main-card m-3 pt-3 pb-1 text-white text-center">
                <h5>Clima</h5>
                @if (!loadingWeath) {
                <div class="card rounded-2 m-2 weather-background text-white">
                    <div class="m-3">
                        <img src="https://openweathermap.org/img/wn/{{weatherDetail.weather[0].icon}}@2x.png"
                            alt="Imagen" width="120px" height="120px">
                        <h1>{{convC}}°C</h1>
                        <h4>Humedad: {{weatherDetail.main.humidity}}%</h4>
                        <h5>Ciudad: {{weatherDetail.name}}</h5>
                        <h5>Pais: {{weatherDetail.sys.country}}</h5>
                    </div>

                </div>
                }@else if(loadingWeath) {
                <div class="card rounded-2 m-2 weather-background text-white">
                    <div class="m-5">
                        <img src="/assets/loading.gif" alt="" width="100px" height="100px">
                        <H4>Cargando...</H4>
                    </div>
                </div>
                }

            </div>
            }


        </div>
        }

    </div>
</div>